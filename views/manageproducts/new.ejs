<!-- Uses the boilerplate template to prevent code repetition and improve consistency -->
<% layout("layouts/boilerplate") %>
<div class="d-flex justify-content-between">
    <a href="/manageproducts/all" class="btn btn-danger mb-5">Return to Products</a>
</div>
<!-- Creates a form to submit a new product -->
<form action="/products?redirect=/manageproducts/new" method="POST" class="mb-5 needs-validation" novalidate
    enctype="multipart/form-data">
    <div class="form-group row mb-3">
        <label for="name" class="col-form-label col-sm-2">Name:</label>
        <div class="col-sm-10">
            <input type="text" name="product[name]" id="name" class="form-control" placeholder="Name" required>
            <div class="invalid-feedback">
                Please enter a name
            </div>
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="price" class="col-form-label col-sm-2">Price:</label>
        <div class="col-sm-10">
            <input type="number" name="product[price]" id="price" step=0.01 class="form-control" placeholder="Price"
                required>
            <div class="invalid-feedback">
                Please enter a price
            </div>
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="briefDescription" class="col-form-label col-sm-2">Brief Description:</label>
        <div class="col-sm-10">
            <textarea name="product[briefDescription]" id="briefDescription" cols="30" rows="3"
                class="form-control"></textarea>
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="description" class="col-form-label col-sm-2">Description:</label>
        <div class="col-sm-10">
            <textarea name="product[description]" id="description" cols="30" rows="3" class="form-control"></textarea>
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="description" class="col-form-label col-sm-2">Images:</label>
        <div class="col-sm-10">
            <input class="form-control" type="file" name="images" id="images" multiple>
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="discount" class="form-check-label col-sm-2">Discount:</label>
        <div class="col-sm-10">
            <input type="checkbox" name="product[discount]" id="discount" class="form-check-input">
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="discountedprice" class="col-form-label col-sm-2">Discounted Price:</label>
        <div class="col-sm-10">
            <input type="number" name="product[discountedPrice]" id="discountedprice" step=0.01 class="form-control">
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="categories" class="col-form-label sol-sm-2">Categories:</label>
        <div class="col-sm-10">
            <select multiple name="product[categories]" id="categories" class="form-control">
                <!-- Loops through all the categories and adds them as a option -->
                <% for (let category of categories) { %>
                <option value="<%= category.id %>">
                    <%= category.name %>
                </option>
                <% } %>
            </select>
        </div>
    </div>

    <div class="form-group row mb-3">
        <label for="stock" class="col-form-label col-sm-2">Stock:</label>
        <div class="col-sm-10">
            <input type="number" name="product[stock]" id="stock" step=1 class="form-control" required>
            <div class="invalid-feedback">
                Please enter the stock level
            </div>
        </div>
    </div>
    <!-- Submits the form -->
    <button class="btn btn-primary form-control">Add Product</button>
</form>